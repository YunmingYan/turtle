<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
    <meta name="renderer" content="webkit">
    <title>RTMP播放协议</title>
    <style>
        body{margin:0;}
        #myPlayer{max-width: 1200px;width: 100%;}
    </style>
</head>
<script>
</script>
<body>
<script src="https://open.ys7.com/sdk/js/2.0/ezuikit.js"></script>
<script src="http://www.jq22.com/jquery/jquery-2.1.1.js"></script>

<video id="myPlayer" controls playsInline webkit-playsinline autoplay >
    <source id="rtmp" width="700px" height="500px" src="rtmp://rtmp01open.ys7.com/openlive/e0f4707fa92c484cbd4e4ad31c074bd3.hd" type="rtmp/flv" />
</video>

<script>

//	  获取haigui2的accessToken
	  window.onload = function(){
//		  rtmp://rtmp01open.ys7.com/openlive/884e01d3a99f4d92b65525da403d9d00.hd
		  	var AppKey = '952b321600b3453fae7d5435e7e29da2'
			var Secret = '960ecd80542dfb5e2728b45290b3f9c5'
			console.log('AppKey初始化成功');
				$.ajax({
					type:'POST',
					url:'https://open.ys7.com/api/lapp/token/get?',
					dataType:"JSON",
					data:{
						appKey:AppKey,
						appSecret:Secret,
					},
					success:function(data){
						console.log(data)
						var accesssToken = data.data.accessToken
						console.log('已获取accessToken：' + accesssToken)
						$.ajax({
							url:'https://open.ys7.com/api/lapp/live/video/list?',
							dataType:'JSON',
							data:{
//								accesssToken:accesssToken
								accesssToken:'at.7f0f9d9e69jc3hx02fuwwbqjb7iar6gh-7eelkk2vcz-1iguhs7-ksinbtz0g'
							},
							success:function(data){
								console.log(data)
								var rtmp = 'rtmp://rtmp01open.ys7.com/openlive/e0f4707fa92c484cbd4e4ad31c074bd3.hd'
								console.log('rtmp地址：'+rtmp)
								('#rtmp').attr('src','rtmp')

								
							},
							error:function(data){
							
						}
						})
					},
					error:function(data){
						console.log(data)
					}
				});
	  };
</script>

<script>
  var player = new EZuikit.EZUIPlayer('myPlayer');

   // 日志
//   player.on('log', log);

//   function log(str){
//       var div = document.createElement('DIV');
//       div.innerHTML = (new Date()).Format('yyyy-MM-dd hh:mm:ss.S') + JSON.stringify(str);
//       document.body.appendChild(div);
//   }


</script>
</body>
</html>